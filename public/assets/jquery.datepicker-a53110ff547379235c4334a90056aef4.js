(function($){if(!dateFormat||typeof dateFormat!="function")var dateFormat=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),w:"0123456".indexOf(this.getDay()),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)(new RegExp("("+c+")")).test(a)&&(a=a.replace(RegExp.$1,RegExp.$1.length==1?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};if(!DateAdd||typeof DateDiff!="function")var DateAdd=function(interval,number,idate){number=parseInt(number);var date;typeof idate=="string"&&(date=idate.split(/\D/),eval("var date = new Date("+date.join(",")+")")),typeof idate=="object"&&(date=new Date(idate.toString()));switch(interval){case"y":date.setFullYear(date.getFullYear()+number);break;case"m":date.setMonth(date.getMonth()+number);break;case"d":date.setDate(date.getDate()+number);break;case"w":date.setDate(date.getDate()+7*number);break;case"h":date.setHours(date.getHours()+number);break;case"n":date.setMinutes(date.getMinutes()+number);break;case"s":date.setSeconds(date.getSeconds()+number);break;case"l":date.setMilliseconds(date.getMilliseconds()+number)}return date};if(!DateDiff||typeof DateDiff!="function")var DateDiff=function(a,b,c){switch(a){case"d":case"w":b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),c=new Date(c.getFullYear(),c.getMonth(),c.getDate());break;case"h":b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours()),c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours());break;case"n":b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes()),c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes());break;case"s":b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds())}var d=b.getTime(),e=c.getTime(),f=NaN;switch(a){case"y":f=c.getFullYear()-b.getFullYear();break;case"m":f=(c.getFullYear()-b.getFullYear())*12+c.getMonth()-b.getMonth();break;case"d":f=Math.floor(e/864e5)-Math.floor(d/864e5);break;case"w":f=Math.floor((e+3456e5)/6048e5)-Math.floor((d+3456e5)/6048e5);break;case"h":f=Math.floor(e/36e5)-Math.floor(d/36e5);break;case"n":f=Math.floor(e/6e4)-Math.floor(d/6e4);break;case"s":f=Math.floor(e/1e3)-Math.floor(d/1e3);break;case"l":f=e-d}return f};var userAgent=window.navigator.userAgent.toLowerCase();$.browser.msie8=$.browser.msie&&/msie 8\.0/i.test(userAgent),$.browser.msie7=$.browser.msie&&/msie 7\.0/i.test(userAgent),$.browser.msie6=!$.browser.msie8&&!$.browser.msie7&&$.browser.msie&&/msie 6\.0/i.test(userAgent),$.fn.noSelect==undefined&&($.fn.noSelect=function(a){return a==null?prevent=!0:prevent=a,prevent?this.each(function(){$.browser.msie||$.browser.safari?$(this).bind("selectstart",function(){return!1}):$.browser.mozilla?($(this).css("MozUserSelect","none"),$("body").trigger("focus")):$.browser.opera?$(this).bind("mousedown",function(){return!1}):$(this).attr("unselectable","on")}):this.each(function(){$.browser.msie||$.browser.safari?$(this).unbind("selectstart"):$.browser.mozilla?$(this).css("MozUserSelect","inherit"):$.browser.opera?$(this).unbind("mousedown"):$(this).removeAttr("unselectable","on")})}),$.fn.datepicker=function(a){function h(){$("#BBIT-DP-TODAY").click(w),c.click(s),$("#BBIT_DP_INNER tbody").click(r),$("#BBIT_DP_LEFTBTN").click(u),$("#BBIT_DP_RIGHTBTN").click(v),$("#BBIT_DP_YMBTN").click(p),$("#BBIT-DP-MP").click(o).dblclick(n),$("#BBIT-DP-MP-PREV").click(k),$("#BBIT-DP-MP-NEXT").click(l),$("#BBIT-DP-MP-OKBTN").click(j),$("#BBIT-DP-MP-CANCELBTN").click(i)}function i(){return $("#BBIT-DP-MP").animate({top:-193},{duration:200,complete:function(){$("#BBIT-DP-MP").hide()}}),!1}function j(){return b.Year=b.cy,b.Month=b.cm+1,b.Day=1,$("#BBIT-DP-MP").animate({top:-193},{duration:200,complete:function(){$("#BBIT-DP-MP").hide()}}),y(),!1}function k(){var a=b.ty-10;return b.ty=a,m(a),!1}function l(){var a=b.ty+10;return b.ty=a,m(a),!1}function m(a){var c=a-4,d=[];for(var e=0;e<5;e++)d.push(c+e),d.push(c+e+5);$("#BBIT-DP-MP td.bbit-dp-mp-year").each(function(a){b.Year==d[a]?$(this).addClass("bbit-dp-mp-sel"):$(this).removeClass("bbit-dp-mp-sel"),$(this).html("<a href='javascript:void(0);'>"+d[a]+"</a>").attr("xyear",d[a])})}function n(a){var b=a.target||a.srcElement,c=q(b);return c==null?!1:(($(c).hasClass("bbit-dp-mp-month")||$(c).hasClass("bbit-dp-mp-year"))&&j(a),!1)}function o(a){var c=$(this),d=a.target||a.srcElement,e=q(d);if(e==null)return!1;if($(e).hasClass("bbit-dp-mp-month")&&!$(e).hasClass("bbit-dp-mp-sel")){var f=c.find("td.bbit-dp-mp-month.bbit-dp-mp-sel");f.length>0&&f.removeClass("bbit-dp-mp-sel"),$(e).addClass("bbit-dp-mp-sel"),b.cm=parseInt($(e).attr("xmonth"))}if($(e).hasClass("bbit-dp-mp-year")&&!$(e).hasClass("bbit-dp-mp-sel")){var f=c.find("td.bbit-dp-mp-year.bbit-dp-mp-sel");f.length>0&&f.removeClass("bbit-dp-mp-sel"),$(e).addClass("bbit-dp-mp-sel"),b.cy=parseInt($(e).attr("xyear"))}return!1}function p(){var a=$("#BBIT-DP-MP"),c=b.Year;b.cy=b.ty=c;var d=b.Month-1;b.cm=d;var e=$("#BBIT-DP-MP td.bbit-dp-mp-month");for(var f=e.length-1;f>=0;f--){var g=$(e[f]).attr("xmonth");g==d?$(e[f]).addClass("bbit-dp-mp-sel"):$(e[f]).removeClass("bbit-dp-mp-sel")}m(c),a.css("top",-193).show().animate({top:0},{duration:200})}function q(a){if(a.tagName.toUpperCase()=="TD")return a;if(a.tagName.toUpperCase()=="BODY")return null;var b=$(a).parent();return b.length>0?b[0].tagName.toUpperCase()!="TD"?q(b[0]):b[0]:null}function r(a){var b=a.target||a.srcElement,d=q(b);if(d==null)return!1;var e=$(d);if(!$(d).hasClass("bbit-dp-disabled")){var f=e.attr("xdate");c.data("indata",t(f)),x()}return!1}function s(){return!1}function t(a){try{var b=a.split(i18n.datepicker.dateformat.separator),c=parseInt(b[i18n.datepicker.dateformat.year_index]),d=parseInt(b[i18n.datepicker.dateformat.month_index])-1,e=parseInt(b[i18n.datepicker.dateformat.day_index]);return new Date(c,d,e)}catch(f){return null}}function u(){return b.Month==1?(b.Year--,b.Month=12):b.Month--,y(),!1}function v(){return b.Month==12?(b.Year++,b.Month=1):b.Month++,y(),!1}function w(){c.data("indata",new Date),x()}function x(){var a=c.data("ctarget"),b=c.data("cpk"),d=c.data("onReturn"),e=c.data("indata"),f=c.data("ads"),g=c.data("ade"),h=!1;f&&e<f&&(h=!0),g&&e>g&&(h=!0);if(h)return;d&&jQuery.isFunction(d)?d.call(a[0],c.data("indata")):a.val(dateFormat.call(c.data("indata"),i18n.datepicker.dateformat.fulldayvalue)),b.attr("isshow","0"),c.removeData("ctarget").removeData("cpk").removeData("indata").removeData("onReturn").removeData("ads").removeData("ade"),c.css("visibility","hidden"),a=b=null}function y(){var a=$("#BBIT_DP_INNER tbody");$("#BBIT_DP_YMBTN").html(b.monthName[b.Month-1]+b.monthp+" "+b.Year);var d=new Date(b.Year,b.Month-1,1),e=b.weekStart-d.getDay(),f=b.Month-1;e>0&&(e-=7);var g=DateAdd("d",e,d),h=DateAdd("d",42,g),i=c.data("ads"),j=c.data("ade"),k=[],l=dateFormat.call(b.today,i18n.datepicker.dateformat.fulldayvalue),m=c.data("indata"),n=m!=null?dateFormat.call(m,i18n.datepicker.dateformat.fulldayvalue):"";for(var o=1;o<=42;o++){o%7==1&&k.push("<tr>");var p=DateAdd("d",o-1,g),q=[],r=!1;i&&p<i&&(r=!0),j&&p>j&&(r=!0),p.getMonth()<f?q.push("bbit-dp-prevday"):p.getMonth()>f&&q.push("bbit-dp-nextday"),r?q.push("bbit-dp-disabled"):q.push("bbit-dp-active");var s=dateFormat.call(p,i18n.datepicker.dateformat.fulldayvalue);s==l&&q.push("bbit-dp-today"),s==n&&q.push("bbit-dp-selected"),k.push("<td class='",q.join(" "),"' title='",dateFormat.call(p,i18n.datepicker.dateformat.fulldayvalue),"' xdate='",dateFormat.call(p,i18n.datepicker.dateformat.fulldayvalue),"'><a href='javascript:void(0);'><em><span>",p.getDate(),"</span></em></a></td>"),o%7==0&&k.push("</tr>")}a.html(k.join(""))}var b={weekStart:0,weekName:[i18n.datepicker.dateformat.sun,i18n.datepicker.dateformat.mon,i18n.datepicker.dateformat.tue,i18n.datepicker.dateformat.wed,i18n.datepicker.dateformat.thu,i18n.datepicker.dateformat.fri,i18n.datepicker.dateformat.sat],monthName:[i18n.datepicker.dateformat.jan,i18n.datepicker.dateformat.feb,i18n.datepicker.dateformat.mar,i18n.datepicker.dateformat.apr,i18n.datepicker.dateformat.may,i18n.datepicker.dateformat.jun,i18n.datepicker.dateformat.jul,i18n.datepicker.dateformat.aug,i18n.datepicker.dateformat.sep,i18n.datepicker.dateformat.oct,i18n.datepicker.dateformat.nov,i18n.datepicker.dateformat.dec],monthp:i18n.datepicker.dateformat.postfix,Year:(new Date).getFullYear(),Month:(new Date).getMonth()+1,Day:(new Date).getDate(),today:new Date,btnOk:i18n.datepicker.ok,btnCancel:i18n.datepicker.cancel,btnToday:i18n.datepicker.today,inputDate:null,onReturn:!1,version:"1.1",applyrule:!1,showtarget:null,picker:""};$.extend(b,a);var c=$("#BBIT_DP_CONTAINER");if(c.length==0){var d=[];d.push("<div id='BBIT_DP_CONTAINER' class='bbit-dp' style='width:175px;z-index:999;'>"),$.browser.msie6&&d.push('<iframe style="position:absolute;z-index:-1;width:100%;height:205px;top:0;left:0;scrolling:no;" frameborder="0" src="about:blank"></iframe>'),d.push("<table class='dp-maintable' cellspacing='0' cellpadding='0' style='width:175px;'><tbody><tr><td>"),d.push("<table class='bbit-dp-top' cellspacing='0' style='padding:0;'><tr><td class='bbit-dp-top-left'> <a id='BBIT_DP_LEFTBTN' href='javascript:void(0);' title='",i18n.datepicker.prev_month_title,"'>&nbsp;</a></td><td class='bbit-dp-top-center' align='center'><em><button id='BBIT_DP_YMBTN'></button></em></td><td class='bbit-dp-top-right'><a id='BBIT_DP_RIGHTBTN' href='javascript:void(0);' title='",i18n.datepicker.next_month_title,"'>&nbsp;</a></td></tr></table>"),d.push("</td></tr>"),d.push("<tr><td>"),d.push("<table id='BBIT_DP_INNER' class='bbit-dp-inner' cellspacing='0' style='margin-bottom:0;'><thead><tr>");for(var e=b.weekStart,f=0;f<7;f++)d.push("<th><span>",b.weekName[e],"</span></th>"),e==6?e=0:e++;d.push("</tr></thead>"),d.push("<tbody></tbody></table>"),d.push("</td></tr>"),d.push("<tr><td class='bbit-dp-bottom' align='center'><button id='BBIT-DP-TODAY' style='background:none;'>",b.btnToday,"</button></td></tr>"),d.push("</tbody></table>"),d.push("<div id='BBIT-DP-MP' class='bbit-dp-mp'  style='z-index:auto;'><table id='BBIT-DP-T' style='width: 175px; height: 193px' border='0' cellspacing='0'><tbody>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='0'><a href='javascript:void(0);'>",b.monthName[0],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='6'><a href='javascript:void(0);'>",b.monthName[6],"</a></td><td class='bbit-dp-mp-ybtn' align='middle'><a id='BBIT-DP-MP-PREV' class='bbit-dp-mp-prev'></a></td><td class='bbit-dp-mp-ybtn' align='middle'><a id='BBIT-DP-MP-NEXT' class='bbit-dp-mp-next'></a></td>"),d.push("</tr>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='1'><a href='javascript:void(0);'>",b.monthName[1],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='7'><a href='javascript:void(0);'>",b.monthName[7],"</a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td>"),d.push("</tr>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='2'><a href='javascript:void(0);'>",b.monthName[2],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='8'><a href='javascript:void(0);'>",b.monthName[8],"</a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td>"),d.push("</tr>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='3'><a href='javascript:void(0);'>",b.monthName[3],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='9'><a href='javascript:void(0);'>",b.monthName[9],"</a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td>"),d.push("</tr>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='4'><a href='javascript:void(0);'>",b.monthName[4],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='10'><a href='javascript:void(0);'>",b.monthName[10],"</a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td>"),d.push("</tr>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='5'><a href='javascript:void(0);'>",b.monthName[5],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='11'><a href='javascript:void(0);'>",b.monthName[11],"</a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td>"),d.push("</tr>"),d.push("<tr class='bbit-dp-mp-btns'>"),d.push("<td colspan='4'><button id='BBIT-DP-MP-OKBTN' class='bbit-dp-mp-ok'>",b.btnOk,"</button><button id='BBIT-DP-MP-CANCELBTN' class='bbit-dp-mp-cancel'>",b.btnCancel,"</button></td>"),d.push("</tr>"),d.push("</tbody></table>"),d.push("</div>"),d.push("</div>");var g=d.join("");$(document.body).append(g),c=$("#BBIT_DP_CONTAINER"),h()}return $(this).each(function(){var a=$(this).addClass("bbit-dp-input"),d=$(b.picker);b.showtarget==null&&a.after(d),d.click(function(d){var e=$(this).attr("isshow"),f=$(this);c.css("visibility")=="visible"&&c.css(" visibility","hidden");if(e=="1")return f.attr("isshow","0"),c.removeData("ctarget").removeData("cpk").removeData("indata").removeData("onReturn"),!1;var g=a.val();g!=""&&(g=t(g)),g==null||g==""?(b.Year=(new Date).getFullYear(),b.Month=(new Date).getMonth()+1,b.Day=(new Date).getDate(),b.inputDate=null):(b.Year=g.getFullYear(),b.Month=g.getMonth()+1,b.Day=g.getDate(),b.inputDate=g),c.data("ctarget",a).data("cpk",f).data("indata",b.inputDate).data("onReturn",b.onReturn);if(b.applyrule&&$.isFunction(b.applyrule)){var h=b.applyrule.call(a,a[0].id);h&&(h.startdate?c.data("ads",h.startdate):c.removeData("ads"),h.enddate?c.data("ade",h.enddate):c.removeData("ade"))}else c.removeData("ads").removeData("ade");y(),$("#BBIT-DP-T").height(c.height());var i=b.showtarget||a,j=i.offset(),k=i.outerHeight(),l={left:j.left,top:j.top+k},m=c.width(),n=c.height(),o=document.documentElement.clientWidth,p=document.documentElement.clientHeight;return l.left+m>=o&&(l.left=o-m-2),l.top+n>=p&&(l.top=j.top-n-2),l.left<0&&(l.left=10),l.top<0&&(l.top=10),$("#BBIT-DP-MP").hide(),l.visibility="visible",c.css(l),$(this).attr("isshow","1"),$(document).one("click",function(a){f.attr("isshow","0"),c.removeData("ctarget").removeData("cpk").removeData("indata"),c.css("visibility","hidden")}),!1})})}})(jQuery);