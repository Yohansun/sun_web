function ImageFlow(){this.defaults={ImageFlowID:"imageflow",preloadImages:!0,reflections:!1,reflectionP:.5,reflectionPNG:!1,reflectionGET:"",imageFocusMax:2,imageFocusM:1,imageCursor:"default",startID:4,startAnimation:!0,slider:!0,sliderCursor:"pointer",sliderWidth:39,xStep:150,captions:!0,opacity:!0,opacityArray:[10,8,6,4,2],onClick:function(){openTeacherBio(this.url)},moreText:"More"};var e=this;this.init=function(t){var n=new Array("ImageFlowID","preloadImages","reflections","reflectionP","reflectionPNG","reflectionGET","imageFocusMax","imageFocusM","imageCursor","startID","startAnimation","slider","sliderCursor","sliderWidth","xStep","captions","opacity","opacityArray","onClick","moreText"),r=n.length;for(var i=0;i<r;i++){var s=n[i];this[s]=t!==undefined&&t[s]!==undefined?t[s]:e.defaults[s]}var o=document.getElementById(e.ImageFlowID);if(o){o.style.visibility="visible",this.ImageFlowDiv=o;if(this.createStructure()){this.imagesDiv=document.getElementById(e.ImageFlowID+"_images"),this.captionDiv=document.getElementById(e.ImageFlowID+"_caption"),this.scrollbarDiv=document.getElementById(e.ImageFlowID+"_scrollbar"),this.sliderDiv=document.getElementById(e.ImageFlowID+"_slider"),this.indexArray=[],this.current=0,this.imageID=0,this.target=0,this.memTarget=0,this.firstRefresh=!0,this.firstCheck=!0,this.busy=!1,this.slider===!1&&(this.scrollbarDiv.style.display="none");var u=this.ImageFlowDiv.offsetWidth,a=Math.round(u*.5085);document.getElementById(e.ImageFlowID+"_loading_txt").style.paddingTop=a*.5-22+"px",o.style.height=a+"px",this.loadingProgress()}}},this.createStructure=function(){var t=document.createElement("div");t.setAttribute("id",e.ImageFlowID+"_images"),t.setAttribute("class","images"),t.setAttribute("className","images");var n=null,r=this.ImageFlowDiv.childNodes.length;for(var i=0;i<r;i++){n=this.ImageFlowDiv.childNodes[i];if(n&&n.nodeType==1&&n.nodeName=="IMG"){if(e.reflections===!0){var s="2";e.reflectionPNG===!0&&(s="3");var o=n.getAttribute("src",2);o="reflect"+s+".php?img="+o+e.reflectionGET,n.setAttribute("src",o)}var u=n.cloneNode(!0);t.appendChild(u)}}var a=document.createElement("p"),f=document.createTextNode(" ");a.setAttribute("id",e.ImageFlowID+"_loading_txt"),a.appendChild(f);var l=document.createElement("div");l.setAttribute("id",e.ImageFlowID+"_loading"),l.setAttribute("class","loading"),l.setAttribute("className","loading");var c=document.createElement("div");c.setAttribute("id",e.ImageFlowID+"_loading_bar"),c.setAttribute("class","loading_bar"),c.setAttribute("className","loading_bar"),l.appendChild(c);var h=document.createElement("div");h.setAttribute("id",e.ImageFlowID+"_caption"),h.setAttribute("class","caption"),h.setAttribute("className","caption");var p=document.createElement("div");p.setAttribute("id",e.ImageFlowID+"_scrollbar"),p.setAttribute("class","scrollbar"),p.setAttribute("className","scrollbar");var d=document.createElement("div");d.setAttribute("id",e.ImageFlowID+"_slider"),d.setAttribute("class","slider"),d.setAttribute("className","slider"),p.appendChild(d);var v=!1;if(e.ImageFlowDiv.appendChild(t)&&e.ImageFlowDiv.appendChild(a)&&e.ImageFlowDiv.appendChild(l)&&e.ImageFlowDiv.appendChild(h)&&e.ImageFlowDiv.appendChild(p)){for(i=0;i<r;i++)n=this.ImageFlowDiv.childNodes[i],n&&n.nodeType==1&&n.nodeName=="IMG"&&this.ImageFlowDiv.removeChild(n);v=!0}return v},this.loadingProgress=function(){var t=e.loadingStatus();if(t<100||e.firstCheck===!0&&e.preloadImages===!0)e.firstCheck===!0&&t==100?(e.firstCheck=!1,window.setTimeout(e.loadingProgress,100)):window.setTimeout(e.loadingProgress,40);else{document.getElementById(e.ImageFlowID+"_loading_txt").style.display="none",document.getElementById(e.ImageFlowID+"_loading").style.display="none",window.setTimeout(e.addResizeEvent,1e3),e.initMouseWheel(),e.MouseDrag.init(),e.Key.init(),e.refresh(!0),document.getElementById(e.ImageFlowID+"_scrollbar").style.visibility="visible";var n=e.startID-1;n<0&&(n=0),n>e.max&&(n=e.max-1),e.glideTo(n),e.startAnimation===!0&&e.moveTo(5e3)}},this.loadingStatus=function(){var t=e.imagesDiv.childNodes.length,n=0,r=0,i=null;for(var s=0;s<t;s++)i=e.imagesDiv.childNodes[s],i&&i.nodeType==1&&i.nodeName=="IMG"&&(i.complete===!0&&r++,n++);var o=Math.round(r/n*100),u=document.getElementById(e.ImageFlowID+"_loading_bar");u.style.width=o+"%";var a=document.getElementById(e.ImageFlowID+"_loading_txt"),f=document.createTextNode("loading images "+r+"/"+n);return a.replaceChild(f,a.firstChild),o},this.refresh=function(){this.iWidth=e.imagesDiv.offsetWidth,this.maxHeight=Math.round(e.iWidth*.51),this.maxFocus=e.imageFocusMax*e.xStep,this.size=e.iWidth*.5,this.scrollbarWidth=Math.round(e.iWidth*.6),this.sliderWidth=e.sliderWidth*.5,e.ImageFlowDiv.style.height=e.maxHeight+"px",e.imagesDiv.style.height=Math.round(e.iWidth*.338)+"px",e.captionDiv.style.width=e.iWidth+"px",e.captionDiv.style.marginTop=Math.round(e.iWidth*.03)+"px",e.scrollbarDiv.style.width=e.scrollbarWidth+"px",e.scrollbarDiv.style.marginTop=Math.round(e.iWidth*.02)+"px",e.scrollbarDiv.style.marginLeft=Math.round(e.iWidth*.2)+"px",e.sliderDiv.style.cursor=e.sliderCursor,e.sliderDiv.onmousedown=function(){return e.MouseDrag.start(this),!1};var t=e.reflections===!0?e.reflectionP+1:1,n=e.imagesDiv.childNodes.length,r=0,i=null;for(var s=0;s<n;s++)i=e.imagesDiv.childNodes[s],i!==null&&i.nodeType==1&&i.nodeName=="IMG"&&(this.indexArray[r]=s,i.url=i.getAttribute("longdesc"),i.xPosition=-r*e.xStep,i.i=r,e.firstRefresh&&(i.getAttribute("width")!==null&&i.getAttribute("height")!==null?(i.w=i.getAttribute("width"),i.h=i.getAttribute("height")*t):(i.w=i.width,i.h=i.height)),i.w>i.h/(e.reflectionP+1)?(i.pc=118,i.pcMem=118):(i.pc=100,i.pcMem=100),i.style.cursor=e.imageCursor,r++);this.max=e.indexArray.length,e.firstRefresh&&(e.firstRefresh=!1),e.moveTo(e.current),e.glideTo(e.imageID)},this.moveTo=function(t){this.current=t,this.zIndex=e.max;for(var n=0;n<e.max;n++){var r=e.imagesDiv.childNodes[e.indexArray[n]],i=n*-e.xStep;if(i+e.maxFocus<e.memTarget||i-e.maxFocus>e.memTarget)r.style.visibility="hidden",r.style.display="none";else{var s=Math.sqrt(1e4+t*t)+100,o=t/s*e.size+e.size;r.style.display="block";var u=r.h/r.w*r.pc/s*e.size,a=0;switch(u>e.maxHeight){case!1:a=r.pc/s*e.size;break;default:u=e.maxHeight,a=r.w*u/r.h}var f=e.iWidth*.34-u+u/(e.reflectionP+1)*e.reflectionP;r.style.left=o-r.pc/2/s*e.size+"px",a&&u&&(r.style.height=u+"px",r.style.width=a+"px",r.style.top=f+"px"),r.style.visibility="visible";switch(t<0){case!0:this.zIndex++;break;default:this.zIndex=e.zIndex-1}switch(r.i==e.imageID){case!1:r.onclick=function(){e.glideTo(this.i)};break;default:this.zIndex=e.zIndex+1,r.url!==""&&(r.onclick=e.onClick)}r.style.zIndex=e.zIndex}t+=e.xStep}};var t="teacher_1";this.glideTo=function(n){var r=-n*e.xStep;this.target=r,this.memTarget=r,this.imageID=n;var i=e.imagesDiv.childNodes[n].getAttribute("summary")+' <span class="more">[<a href="#"  onclick="openTeacherBio(\''+e.imagesDiv.childNodes[n].getAttribute("longdesc")+"'); return false;\">"+this.moreText+"</a>]</span>";if(i===""||e.captions===!1)i="&nbsp;";e.captionDiv.innerHTML=i,teacher=e.imagesDiv.childNodes[n].getAttribute("longdesc"),jQuery("#"+t).hide(),jQuery("#"+teacher).show(),t=e.imagesDiv.childNodes[n].getAttribute("longdesc"),e.MouseDrag.busy===!1&&(this.newSliderX=n*e.scrollbarWidth/(e.max-1)-e.MouseDrag.newX,e.sliderDiv.style.marginLeft=e.newSliderX-e.sliderWidth+"px");if(e.opacity===!0||e.imageFocusM!==e.defaults.imageFocusM){e.setOpacity(e.imagesDiv.childNodes[n],e.opacityArray[0]),e.imagesDiv.childNodes[n].pc=e.imagesDiv.childNodes[n].pc*e.imageFocusM;var s=0,o=0,u=0,a=e.opacityArray.length;for(var f=1;f<e.imageFocusMax+1;f++)f+1>a?s=e.opacityArray[a-1]:s=e.opacityArray[f],o=n+f,u=n-f,o<e.max&&(e.setOpacity(e.imagesDiv.childNodes[o],s),e.imagesDiv.childNodes[o].pc=e.imagesDiv.childNodes[o].pcMem),u>=0&&(e.setOpacity(e.imagesDiv.childNodes[u],s),e.imagesDiv.childNodes[u].pc=e.imagesDiv.childNodes[u].pcMem)}e.busy===!1&&(window.setTimeout(e.animate,50),e.busy=!0)},this.animate=function(){switch(e.target<e.current-1||e.target>e.current+1){case!0:e.moveTo(e.current+(e.target-e.current)/3),window.setTimeout(e.animate,50),e.busy=!0;break;default:e.busy=!1}},this.setOpacity=function(t,n){e.opacity===!0&&(t.style.opacity=n/10,t.style.filter="alpha(opacity="+n*10+")")},this.initMouseWheel=function(){window.addEventListener&&e.ImageFlowDiv.addEventListener("DOMMouseScroll",e.eventMouseWheel,!1),e.ImageFlowDiv.onmousewheel=e.eventMouseWheel},this.eventMouseWheel=function(t){var n=0;t||(t=window.event),t.wheelDelta?n=t.wheelDelta/120:t.detail&&(n=-t.detail/3),n&&e.handleMouseWheel(n),t.preventDefault&&t.preventDefault(),t.returnValue=!1},this.handleMouseWheel=function(t){var n=!1,r=0;t>0?e.imageID>=1&&(r=e.imageID-1,n=!0):e.imageID<e.max-1&&(r=e.imageID+1,n=!0),n===!0&&e.glideTo(r)},this.MouseDrag={object:null,objectX:0,mouseX:0,newX:0,busy:!1,init:function(){e.addEvent(e.ImageFlowDiv,"mousemove",e.MouseDrag.drag),e.addEvent(e.ImageFlowDiv,"mouseup",e.MouseDrag.stop),e.addEvent(document,"mouseup",e.MouseDrag.stop),e.ImageFlowDiv.onselectstart=function(){var t=!0;return e.MouseDrag.busy===!0&&(t=!1),t}},start:function(t){e.MouseDrag.object=t,e.MouseDrag.objectX=e.MouseDrag.mouseX-t.offsetLeft+e.newSliderX},stop:function(){e.MouseDrag.object=null,e.MouseDrag.busy=!1},drag:function(t){var n=0;t||(t=window.event),t.pageX?n=t.pageX:t.clientX&&(n=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),e.MouseDrag.mouseX=n;if(e.MouseDrag.object!==null){var r=e.MouseDrag.mouseX-e.MouseDrag.objectX+e.sliderWidth;r<-e.newSliderX&&(r=-e.newSliderX),r>e.scrollbarWidth-e.newSliderX&&(r=e.scrollbarWidth-e.newSliderX);var i=(r+e.newSliderX)/(e.scrollbarWidth/(e.max-1)),s=Math.round(i);e.MouseDrag.newX=r,e.MouseDrag.object.style.left=r+"px",e.imageID!==s&&e.glideTo(s),e.MouseDrag.busy=!0}}},this.Key={init:function(){document.onkeydown=function(t){e.Key.handle(t)}},handle:function(t){var n=e.Key.get(t);switch(n){case 39:e.handleMouseWheel(-1);break;case 37:e.handleMouseWheel(1)}},get:function(e){return e=e||window.event,e.keyCode}},this.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event)},e.attachEvent("on"+t,e[t+n]))},this.addResizeEvent=function(){var t=window.onresize;typeof window.onresize!="function"?window.onresize=function(){e.refresh()}:window.onresize=function(){t&&t(),e.refresh()}}}function startImageFlow(e,t){domReady(function(){var n=new ImageFlow;n.init({ImageFlowID:e,moreText:t})})}function openTeacherBio(e){currentTeacher!=""&&jQuery("#"+currentTeacher).hide(),jQuery("#"+e).show(),jQuery("#teacherbio").fadeIn("fast"),currentTeacher=e}function closeTeacherBio(e){jQuery("#teacherbio").fadeOut("fast")}var domReadyEvent={name:"domReadyEvent",events:{},domReadyID:1,bDone:!1,DOMContentLoadedCustom:null,add:function(e){e.$$domReadyID||(e.$$domReadyID=this.domReadyID++,this.bDone&&e(),this.events[e.$$domReadyID]=e)},remove:function(e){e.$$domReadyID&&delete this.events[e.$$domReadyID]},run:function(){if(this.bDone)return;this.bDone=!0;for(var e in this.events)this.events[e]()},schedule:function(){if(this.bDone)return;if(/KHTML|WebKit/i.test(navigator.userAgent))/loaded|complete/.test(document.readyState)?this.run():setTimeout(this.name+".schedule()",100);else if(document.getElementById("__ie_onload"))return!0;return typeof this.DOMContentLoadedCustom=="function"&&typeof document.getElementsByTagName!="undefined"&&(document.getElementsByTagName("body")[0]!==null||document.body!==null)&&(this.DOMContentLoadedCustom()?this.run():setTimeout(this.name+".schedule()",250)),!0},init:function(){function e(){domReadyEvent.run()}document.addEventListener&&document.addEventListener("DOMContentLoaded",function(){domReadyEvent.run()},!1),setTimeout("domReadyEvent.schedule()",100);if(typeof addEvent!="undefined")addEvent(window,"load",e);else if(document.addEventListener)document.addEventListener("load",e,!1);else if(typeof window.onload=="function"){var t=window.onload;window.onload=function(){domReadyEvent.run(),t()}}else window.onload=e}},domReady=function(e){domReadyEvent.add(e)};domReadyEvent.init();var currentTeacher="";