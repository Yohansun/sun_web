function ImageFlow(){this.defaults={ImageFlowID:"imageflow",preloadImages:!0,reflections:!1,reflectionP:.5,reflectionPNG:!1,reflectionGET:"",imageFocusMax:2,imageFocusM:1,imageCursor:"default",startID:4,startAnimation:!0,slider:!0,sliderCursor:"pointer",sliderWidth:39,xStep:150,captions:!0,opacity:!0,opacityArray:[10,8,6,4,2],onClick:function(){openTeacherBio(this.url)},moreText:"More"};var a=this;this.init=function(b){var c=new Array("ImageFlowID","preloadImages","reflections","reflectionP","reflectionPNG","reflectionGET","imageFocusMax","imageFocusM","imageCursor","startID","startAnimation","slider","sliderCursor","sliderWidth","xStep","captions","opacity","opacityArray","onClick","moreText"),d=c.length;for(var e=0;e<d;e++){var f=c[e];this[f]=b!==undefined&&b[f]!==undefined?b[f]:a.defaults[f]}var g=document.getElementById(a.ImageFlowID);if(g){g.style.visibility="visible",this.ImageFlowDiv=g;if(this.createStructure()){this.imagesDiv=document.getElementById(a.ImageFlowID+"_images"),this.captionDiv=document.getElementById(a.ImageFlowID+"_caption"),this.scrollbarDiv=document.getElementById(a.ImageFlowID+"_scrollbar"),this.sliderDiv=document.getElementById(a.ImageFlowID+"_slider"),this.indexArray=[],this.current=0,this.imageID=0,this.target=0,this.memTarget=0,this.firstRefresh=!0,this.firstCheck=!0,this.busy=!1,this.slider===!1&&(this.scrollbarDiv.style.display="none");var h=this.ImageFlowDiv.offsetWidth,i=Math.round(h*.5085);document.getElementById(a.ImageFlowID+"_loading_txt").style.paddingTop=i*.5-22+"px",g.style.height=i+"px",this.loadingProgress()}}},this.createStructure=function(){var b=document.createElement("div");b.setAttribute("id",a.ImageFlowID+"_images"),b.setAttribute("class","images"),b.setAttribute("className","images");var c=null,d=this.ImageFlowDiv.childNodes.length;for(var e=0;e<d;e++){c=this.ImageFlowDiv.childNodes[e];if(c&&c.nodeType==1&&c.nodeName=="IMG"){if(a.reflections===!0){var f="2";a.reflectionPNG===!0&&(f="3");var g=c.getAttribute("src",2);g="reflect"+f+".php?img="+g+a.reflectionGET,c.setAttribute("src",g)}var h=c.cloneNode(!0);b.appendChild(h)}}var i=document.createElement("p"),j=document.createTextNode(" ");i.setAttribute("id",a.ImageFlowID+"_loading_txt"),i.appendChild(j);var k=document.createElement("div");k.setAttribute("id",a.ImageFlowID+"_loading"),k.setAttribute("class","loading"),k.setAttribute("className","loading");var l=document.createElement("div");l.setAttribute("id",a.ImageFlowID+"_loading_bar"),l.setAttribute("class","loading_bar"),l.setAttribute("className","loading_bar"),k.appendChild(l);var m=document.createElement("div");m.setAttribute("id",a.ImageFlowID+"_caption"),m.setAttribute("class","caption"),m.setAttribute("className","caption");var n=document.createElement("div");n.setAttribute("id",a.ImageFlowID+"_scrollbar"),n.setAttribute("class","scrollbar"),n.setAttribute("className","scrollbar");var o=document.createElement("div");o.setAttribute("id",a.ImageFlowID+"_slider"),o.setAttribute("class","slider"),o.setAttribute("className","slider"),n.appendChild(o);var p=!1;if(a.ImageFlowDiv.appendChild(b)&&a.ImageFlowDiv.appendChild(i)&&a.ImageFlowDiv.appendChild(k)&&a.ImageFlowDiv.appendChild(m)&&a.ImageFlowDiv.appendChild(n)){for(e=0;e<d;e++)c=this.ImageFlowDiv.childNodes[e],c&&c.nodeType==1&&c.nodeName=="IMG"&&this.ImageFlowDiv.removeChild(c);p=!0}return p},this.loadingProgress=function(){var b=a.loadingStatus();if(b<100||a.firstCheck===!0&&a.preloadImages===!0)a.firstCheck===!0&&b==100?(a.firstCheck=!1,window.setTimeout(a.loadingProgress,100)):window.setTimeout(a.loadingProgress,40);else{document.getElementById(a.ImageFlowID+"_loading_txt").style.display="none",document.getElementById(a.ImageFlowID+"_loading").style.display="none",window.setTimeout(a.addResizeEvent,1e3),a.initMouseWheel(),a.MouseDrag.init(),a.Key.init(),a.refresh(!0),document.getElementById(a.ImageFlowID+"_scrollbar").style.visibility="visible";var c=a.startID-1;c<0&&(c=0),c>a.max&&(c=a.max-1),a.glideTo(c),a.startAnimation===!0&&a.moveTo(5e3)}},this.loadingStatus=function(){var b=a.imagesDiv.childNodes.length,c=0,d=0,e=null;for(var f=0;f<b;f++)e=a.imagesDiv.childNodes[f],e&&e.nodeType==1&&e.nodeName=="IMG"&&(e.complete===!0&&d++,c++);var g=Math.round(d/c*100),h=document.getElementById(a.ImageFlowID+"_loading_bar");h.style.width=g+"%";var i=document.getElementById(a.ImageFlowID+"_loading_txt"),j=document.createTextNode("loading images "+d+"/"+c);return i.replaceChild(j,i.firstChild),g},this.refresh=function(){this.iWidth=a.imagesDiv.offsetWidth,this.maxHeight=Math.round(a.iWidth*.51),this.maxFocus=a.imageFocusMax*a.xStep,this.size=a.iWidth*.5,this.scrollbarWidth=Math.round(a.iWidth*.6),this.sliderWidth=a.sliderWidth*.5,a.ImageFlowDiv.style.height=a.maxHeight+"px",a.imagesDiv.style.height=Math.round(a.iWidth*.338)+"px",a.captionDiv.style.width=a.iWidth+"px",a.captionDiv.style.marginTop=Math.round(a.iWidth*.03)+"px",a.scrollbarDiv.style.width=a.scrollbarWidth+"px",a.scrollbarDiv.style.marginTop=Math.round(a.iWidth*.02)+"px",a.scrollbarDiv.style.marginLeft=Math.round(a.iWidth*.2)+"px",a.sliderDiv.style.cursor=a.sliderCursor,a.sliderDiv.onmousedown=function(){return a.MouseDrag.start(this),!1};var b=a.reflections===!0?a.reflectionP+1:1,c=a.imagesDiv.childNodes.length,d=0,e=null;for(var f=0;f<c;f++)e=a.imagesDiv.childNodes[f],e!==null&&e.nodeType==1&&e.nodeName=="IMG"&&(this.indexArray[d]=f,e.url=e.getAttribute("longdesc"),e.xPosition=-d*a.xStep,e.i=d,a.firstRefresh&&(e.getAttribute("width")!==null&&e.getAttribute("height")!==null?(e.w=e.getAttribute("width"),e.h=e.getAttribute("height")*b):(e.w=e.width,e.h=e.height)),e.w>e.h/(a.reflectionP+1)?(e.pc=118,e.pcMem=118):(e.pc=100,e.pcMem=100),e.style.cursor=a.imageCursor,d++);this.max=a.indexArray.length,a.firstRefresh&&(a.firstRefresh=!1),a.moveTo(a.current),a.glideTo(a.imageID)},this.moveTo=function(b){this.current=b,this.zIndex=a.max;for(var c=0;c<a.max;c++){var d=a.imagesDiv.childNodes[a.indexArray[c]],e=c*-a.xStep;if(e+a.maxFocus<a.memTarget||e-a.maxFocus>a.memTarget)d.style.visibility="hidden",d.style.display="none";else{var f=Math.sqrt(1e4+b*b)+100,g=b/f*a.size+a.size;d.style.display="block";var h=d.h/d.w*d.pc/f*a.size,i=0;switch(h>a.maxHeight){case!1:i=d.pc/f*a.size;break;default:h=a.maxHeight,i=d.w*h/d.h}var j=a.iWidth*.34-h+h/(a.reflectionP+1)*a.reflectionP;d.style.left=g-d.pc/2/f*a.size+"px",i&&h&&(d.style.height=h+"px",d.style.width=i+"px",d.style.top=j+"px"),d.style.visibility="visible";switch(b<0){case!0:this.zIndex++;break;default:this.zIndex=a.zIndex-1}switch(d.i==a.imageID){case!1:d.onclick=function(){a.glideTo(this.i)};break;default:this.zIndex=a.zIndex+1,d.url!==""&&(d.onclick=a.onClick)}d.style.zIndex=a.zIndex}b+=a.xStep}};var b="teacher_1";this.glideTo=function(c){var d=-c*a.xStep;this.target=d,this.memTarget=d,this.imageID=c;var e=a.imagesDiv.childNodes[c].getAttribute("summary")+' <span class="more">[<a href="#"  onclick="openTeacherBio(\''+a.imagesDiv.childNodes[c].getAttribute("longdesc")+"'); return false;\">"+this.moreText+"</a>]</span>";if(e===""||a.captions===!1)e="&nbsp;";a.captionDiv.innerHTML=e,teacher=a.imagesDiv.childNodes[c].getAttribute("longdesc"),jQuery("#"+b).hide(),jQuery("#"+teacher).show(),b=a.imagesDiv.childNodes[c].getAttribute("longdesc"),a.MouseDrag.busy===!1&&(this.newSliderX=c*a.scrollbarWidth/(a.max-1)-a.MouseDrag.newX,a.sliderDiv.style.marginLeft=a.newSliderX-a.sliderWidth+"px");if(a.opacity===!0||a.imageFocusM!==a.defaults.imageFocusM){a.setOpacity(a.imagesDiv.childNodes[c],a.opacityArray[0]),a.imagesDiv.childNodes[c].pc=a.imagesDiv.childNodes[c].pc*a.imageFocusM;var f=0,g=0,h=0,i=a.opacityArray.length;for(var j=1;j<a.imageFocusMax+1;j++)j+1>i?f=a.opacityArray[i-1]:f=a.opacityArray[j],g=c+j,h=c-j,g<a.max&&(a.setOpacity(a.imagesDiv.childNodes[g],f),a.imagesDiv.childNodes[g].pc=a.imagesDiv.childNodes[g].pcMem),h>=0&&(a.setOpacity(a.imagesDiv.childNodes[h],f),a.imagesDiv.childNodes[h].pc=a.imagesDiv.childNodes[h].pcMem)}a.busy===!1&&(window.setTimeout(a.animate,50),a.busy=!0)},this.animate=function(){switch(a.target<a.current-1||a.target>a.current+1){case!0:a.moveTo(a.current+(a.target-a.current)/3),window.setTimeout(a.animate,50),a.busy=!0;break;default:a.busy=!1}},this.setOpacity=function(b,c){a.opacity===!0&&(b.style.opacity=c/10,b.style.filter="alpha(opacity="+c*10+")")},this.initMouseWheel=function(){window.addEventListener&&a.ImageFlowDiv.addEventListener("DOMMouseScroll",a.eventMouseWheel,!1),a.ImageFlowDiv.onmousewheel=a.eventMouseWheel},this.eventMouseWheel=function(b){var c=0;b||(b=window.event),b.wheelDelta?c=b.wheelDelta/120:b.detail&&(c=-b.detail/3),c&&a.handleMouseWheel(c),b.preventDefault&&b.preventDefault(),b.returnValue=!1},this.handleMouseWheel=function(b){var c=!1,d=0;b>0?a.imageID>=1&&(d=a.imageID-1,c=!0):a.imageID<a.max-1&&(d=a.imageID+1,c=!0),c===!0&&a.glideTo(d)},this.MouseDrag={object:null,objectX:0,mouseX:0,newX:0,busy:!1,init:function(){a.addEvent(a.ImageFlowDiv,"mousemove",a.MouseDrag.drag),a.addEvent(a.ImageFlowDiv,"mouseup",a.MouseDrag.stop),a.addEvent(document,"mouseup",a.MouseDrag.stop),a.ImageFlowDiv.onselectstart=function(){var b=!0;return a.MouseDrag.busy===!0&&(b=!1),b}},start:function(b){a.MouseDrag.object=b,a.MouseDrag.objectX=a.MouseDrag.mouseX-b.offsetLeft+a.newSliderX},stop:function(){a.MouseDrag.object=null,a.MouseDrag.busy=!1},drag:function(b){var c=0;b||(b=window.event),b.pageX?c=b.pageX:b.clientX&&(c=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),a.MouseDrag.mouseX=c;if(a.MouseDrag.object!==null){var d=a.MouseDrag.mouseX-a.MouseDrag.objectX+a.sliderWidth;d<-a.newSliderX&&(d=-a.newSliderX),d>a.scrollbarWidth-a.newSliderX&&(d=a.scrollbarWidth-a.newSliderX);var e=(d+a.newSliderX)/(a.scrollbarWidth/(a.max-1)),f=Math.round(e);a.MouseDrag.newX=d,a.MouseDrag.object.style.left=d+"px",a.imageID!==f&&a.glideTo(f),a.MouseDrag.busy=!0}}},this.Key={init:function(){document.onkeydown=function(b){a.Key.handle(b)}},handle:function(b){var c=a.Key.get(b);switch(c){case 39:a.handleMouseWheel(-1);break;case 37:a.handleMouseWheel(1)}},get:function(a){return a=a||window.event,a.keyCode}},this.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c]))},this.addResizeEvent=function(){var b=window.onresize;typeof window.onresize!="function"?window.onresize=function(){a.refresh()}:window.onresize=function(){b&&b(),a.refresh()}}}function startImageFlow(a,b){domReady(function(){var c=new ImageFlow;c.init({ImageFlowID:a,moreText:b})})}function openTeacherBio(a){currentTeacher!=""&&jQuery("#"+currentTeacher).hide(),jQuery("#"+a).show(),jQuery("#teacherbio").fadeIn("fast"),currentTeacher=a}function closeTeacherBio(a){jQuery("#teacherbio").fadeOut("fast")}var domReadyEvent={name:"domReadyEvent",events:{},domReadyID:1,bDone:!1,DOMContentLoadedCustom:null,add:function(a){a.$$domReadyID||(a.$$domReadyID=this.domReadyID++,this.bDone&&a(),this.events[a.$$domReadyID]=a)},remove:function(a){a.$$domReadyID&&delete this.events[a.$$domReadyID]},run:function(){if(this.bDone)return;this.bDone=!0;for(var a in this.events)this.events[a]()},schedule:function(){if(this.bDone)return;if(/KHTML|WebKit/i.test(navigator.userAgent))/loaded|complete/.test(document.readyState)?this.run():setTimeout(this.name+".schedule()",100);else if(document.getElementById("__ie_onload"))return!0;return typeof this.DOMContentLoadedCustom=="function"&&typeof document.getElementsByTagName!="undefined"&&(document.getElementsByTagName("body")[0]!==null||document.body!==null)&&(this.DOMContentLoadedCustom()?this.run():setTimeout(this.name+".schedule()",250)),!0},init:function(){function a(){domReadyEvent.run()}document.addEventListener&&document.addEventListener("DOMContentLoaded",function(){domReadyEvent.run()},!1),setTimeout("domReadyEvent.schedule()",100);if(typeof addEvent!="undefined")addEvent(window,"load",a);else if(document.addEventListener)document.addEventListener("load",a,!1);else if(typeof window.onload=="function"){var b=window.onload;window.onload=function(){domReadyEvent.run(),b()}}else window.onload=a}},domReady=function(a){domReadyEvent.add(a)};domReadyEvent.init();var currentTeacher="";