$('.recommend<%= @recommend.id %>').replaceWith('<%=j render partial: 'edit_form', locals: { recommend: @recommend} %>');
$('.edit_recommend').unbind('click');
$('#link3').click(function(){
	window.open($('#recommend_url_field').val());
});
(function($) {
  $('.title-field').bind('keydown keyup', function() {
    var $this = $(this);
    var total = $this.data('total');
    if (!total)
      return;
    var len = total - $this.val().length;
    if (len < 0) {
      $this.val($this.val().slice(0, total));
    }
  });
}($));

$('.recommend_save').click(function(){
	var $position = $('#recommend_select_field').val(),
			$title = $('#recommend_title_field').val(),
			$url = $('#recommend_url_field').val();
	$.ajax({
		type: "POST",
    url: "<%= update_recommend_home_recommends_path %>",
    data: {id : <%= @recommend.id %>, position : $position, title : $title, url : $url}
	});
});