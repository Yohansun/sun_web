<% if @images.first.id != params[:image_id].to_i %>
<a href="/images/<%=@images.first.id%>/<% if params[:offset].to_i <= 4 %>1<% else %><%=params[:offset].to_i - 4%><% end %>/<%=params[:path]%>" class="map-prev-bullet">prev</a>
<hr class="nomargin">
<a href="/images/<%=@up_id%>/<%=params[:offset].to_i - 1%>/<%=params[:path]%>" class="map-prev">上一张图</a>
<% else %>
<a class="map-prev-bullet" href="javascript:alert('当前已经是第一张图片');">prev</a>
<hr class="nomargin">
<a class="map-prev" href="javascript:alert('当前已经是第一张图片');">上一张图</a>
<% end %>
<div class="map-kv-container nomargin">
  <ul>
    <% @images.each_with_index do |image, index| %>
      <li class="<%= "map-active" if image.id == params[:image_id].to_i %>"><a href="/images/<%=image.id%>/<%= params[:offset].to_i + index %>/<%=params[:path]%>"><span></span><img src="<%= image.file.url(:image_show_thumb) %>" alt="" /></a></li>
    <% end %>
  </ul>
</div>
<% if @next_id %>
<a href="/images/<%=@next_id%>/<%=params[:offset].to_i + 1%>/<%=params[:path]%>" class="map-next">下一张图</a>
<% else %>
<a class="map-next" href="javascript:alert('当前已经是最后一张图片');">下一张图</a>
<% end %>
<hr class="nomargin">
<% if @images.last.id != params[:image_id].to_i %>
<a href="/images/<%=@images.last.id%>/<% if (params[:offset].to_i + 4) >= @img_count %><%=@img_count%><% else %><%=params[:offset].to_i + 4%><% end %>/<%=params[:path]%>" class="map-next-bullet mt10">next</a>
<% else %>
<a class="map-next-bullet mt10" href="javascript:alert('当前已经是最后一张图片');">next</a>
<% end %>